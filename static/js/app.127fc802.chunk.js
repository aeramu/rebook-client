(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{197:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var a,r,o,l,i=n(0),c=n.n(i),s=n(29),u=new s.ApolloClient({uri:"http://rebook-server.herokuapp.com/graphql",cache:new s.InMemoryCache}),d=n(171),m=n(258),g=n(63),f=n.n(g),y=n(5),b=n(21),h=n(4),E=n(80),p=n(190),I=function(){return c.a.createElement(h.a,{style:k.header},c.a.createElement(b.a,{style:k.title},"BiblioGig"),c.a.createElement(b.a,{style:k.subtitle},"by Coder x ISH TIBEN"))},k=y.a.create({header:{height:100,backgroundColor:"blue",alignItems:"stretch",alignSelf:"stretch",justifyContent:"flex-start"},title:{fontSize:25,fontWeight:"bold",color:"white",justifyContent:"center",paddingTop:20,paddingBottom:10,paddingLeft:60},subtitle:{fontSize:10,color:"white",justifyContent:"center",paddingBottom:10,paddingLeft:60}}),C=n(113),B=n(60),v=function(e){var t=e.title,n=e.author,a=e.imageUrl,r=e.onPress;return c.a.createElement(C.a,{onPress:r,underlayColor:"white"},c.a.createElement(h.a,{style:x.container},c.a.createElement(B.a,{resizeMode:"cover",style:x.image,source:{uri:a}}),c.a.createElement(h.a,{style:x.tag},c.a.createElement(b.a,{style:x.title,numberOfLines:2},t),c.a.createElement(b.a,{style:x.subtitle,numberOfLines:1},n))))},x=y.a.create({container:{alignItems:"stretch",justifyContent:"flex-start",borderRadius:10,overflow:"hidden",borderWidth:.75,borderColor:"grey",width:210,height:420},image:{height:320},tag:{flex:1,backgroundColor:"white",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:10,paddingRight:10,paddingBottom:10,paddingTop:10},title:{fontSize:20,fontWeight:"bold",color:"black"},subtitle:{fontSize:15,color:"grey",justifyContent:"center"}}),w=function(e){var t=e.navigation,n=Math.floor(Object(p.a)().width/250),a=Object(s.useQuery)(D,{variables:{first:50,after:null}}),r=a.loading,o=a.data;if(r)return c.a.createElement(h.a,null,c.a.createElement(b.a,null,"Loading..."));if(!o)return c.a.createElement(h.a,null,c.a.createElement(b.a,null,"Failed to load"));return c.a.createElement(h.a,{style:j.container},c.a.createElement(I,null),c.a.createElement(E.a,{key:n,numColumns:n||1,data:o.getBookList.edges,renderItem:function(e){var n,a=e.item;return c.a.createElement(h.a,{style:j.cardContainer},c.a.createElement(v,{title:a.title,author:a.author,imageUrl:a.coverImage,onPress:(n=a.id,function(){t.navigate("Book",{bookId:n})})}))},keyExtractor:function(e){return e.id}}))},j=y.a.create({container:{flex:1,backgroundColor:"white",alignItems:"center",justifyContent:"flex-start"},cardContainer:{margin:20}}),D=Object(s.gql)(a||(a=f()(["\n  query($first: Int! $after: String){\n    getBookList(first: $first after: $after){\n      edges{\n        id\n        title\n        author\n        coverImage\n      }\n      pageInfo{\n        endCursor\n        hasNextPage\n      }\n    }\n  }\n"]))),S=n(9),$=n.n(S),L=n(115),O=function(e){var t=e.bookID,n=e.style,a=c.a.useState(1),r=$()(a,2),o=r[0],l=r[1],i=Object(s.useQuery)(z,{variables:{id:t,page:o}}),u=i.data,d=i.loading;return c.a.createElement(h.a,{style:n},c.a.createElement(h.a,{style:P.textContainer},d?c.a.createElement(b.a,null,"Loading..."):c.a.createElement(b.a,null,u.getBookByID.summary.text)),c.a.createElement(h.a,{style:P.buttonContainer},c.a.createElement(L.a,{title:"Previous",onPress:function(){l(o-1)},disabled:1==o}),c.a.createElement(b.a,null,o+"/"+(u?u.getBookByID.summary.totalPage:1)),c.a.createElement(L.a,{title:"Next",onPress:function(){l(o+1)},disabled:o>=(d?1:u.getBookByID.summary.totalPage)})))},P=y.a.create({buttonContainer:{alignItems:"center",justifyContent:"space-between",flexDirection:"row",marginTop:40},textContainer:{flex:1}}),z=Object(s.gql)(r||(r=f()(["\n    query($id: ID!, $page: Int!){\n        getBookByID(id: $id){\n            summary(page: $page){\n                text\n                totalPage\n            }\n        }\n    }\n"]))),T=function(e){var t=e.bookID,n=e.style,a=Object(s.useQuery)(H,{variables:{id:t,first:10}}),r=a.data;return a.loading?c.a.createElement(h.a,null,c.a.createElement(b.a,null,"Loading...")):c.a.createElement(h.a,{style:n},c.a.createElement(b.a,{style:W.containerTitle},"Point of View"),c.a.createElement(E.a,{data:r.getBookByID.reference.edges,renderItem:function(e){var t=e.item;return c.a.createElement(q,{title:t.title,description:t.description,url:t.url})},keyExtractor:function(e){return e.id}}))},q=function(e){var t=e.title,n=e.description,a=e.url;return c.a.createElement(C.a,{underlayColor:"white",onPress:function(){window.open(a)},style:W.cardContainer},c.a.createElement(h.a,null,c.a.createElement(b.a,{style:W.title},t),c.a.createElement(b.a,{style:W.subtitle},n)))},W=y.a.create({containerTitle:{color:"grey",fontSize:25,fontWeight:"bold",marginLeft:10},title:{fontSize:20,fontWeight:"bold"},subtitle:{color:"grey"},cardContainer:{marginVertical:10,padding:10,paddingHorizontal:20,borderRadius:20,borderWidth:.5,borderColor:"grey"}}),H=Object(s.gql)(o||(o=f()(["\n    query($id: ID!, $first: Int!){\n        getBookByID(id: $id){\n            reference(first: $first){\n                edges{\n                    id\n                    title\n                    description\n                    url\n                    rating\n                }\n            }\n        }\n      }\n"]))),N=function(e){var t=e.route,n=Object(s.useQuery)(R,{variables:{id:t.params.bookId}}),a=n.data;return n.loading?c.a.createElement(h.a,null,c.a.createElement(b.a,null,"Loading...")):a?c.a.createElement(h.a,null,c.a.createElement(I,null),c.a.createElement(h.a,{style:Q.container},c.a.createElement(B.a,{style:Q.image,source:{uri:a.getBookByID.coverImage}}),c.a.createElement(h.a,{style:Q.containerTitle},c.a.createElement(b.a,{style:Q.title},a.getBookByID.title),c.a.createElement(b.a,{style:Q.author},a.getBookByID.author),c.a.createElement(O,{bookID:t.params.bookId,style:Q.summary}),c.a.createElement(T,{bookID:t.params.bookId,style:Q.reference})))):c.a.createElement(h.a,null,c.a.createElement(b.a,null,"Failed to load"))},Q=y.a.create({containerTitle:{alignItems:"stretch",justifyContent:"flex-start",flexDirection:"column",marginLeft:50,flex:1},container:{alignItems:"stretch",justifyContent:"flex-start",flexDirection:"row",padding:50,backgroundColor:"white"},image:{width:350,height:500,borderRadius:10},title:{fontSize:50,fontWeight:"bold",color:"black"},author:{fontSize:20,color:"grey"},summary:{marginTop:20,height:400},reference:{marginTop:30}}),R=Object(s.gql)(l||(l=f()(["\n    query($id: ID!){\n        getBookByID(id: $id){\n            id\n            title\n            author\n            coverImage\n        }\n    }\n"]))),M=Object(m.a)(),A=function(){return c.a.createElement(M.Navigator,{screenOptions:{headerShown:!1}},c.a.createElement(M.Screen,{name:"Home",component:w}),c.a.createElement(M.Screen,{name:"Book",component:N}))},F={prefixes:["https://aeramu.github.io/rebook-client","http://localhost:1900"],config:{Home:"",Book:"book/:bookId"}},J=function(){return c.a.createElement(d.a,{linking:F},c.a.createElement(A,null))};function U(){return c.a.createElement(s.ApolloProvider,{client:u},c.a.createElement(J,null))}},207:function(e,t,n){e.exports=n(255)}},[[207,1,2]]]);
//# sourceMappingURL=app.127fc802.chunk.js.map