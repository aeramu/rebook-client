(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{212:function(e,t,n){"use strict";n.d(t,"a",(function(){return re}));var a,r,o,i,l=n(0),c=n.n(l),s=n(36),u=new s.ApolloClient({uri:"https://rebook-server.herokuapp.com/graphql",cache:new s.InMemoryCache}),d=n(179),g=n(278),m=n(65),f=n.n(m),y=n(7),h=n.n(y),b=n(5),p=n(16),E=n(3),C=n(84),x=n(118),I=n(113),k=n(63),w=function(e){var t=e.title,n=e.author,a=e.imageUrl,r=e.onPress;return c.a.createElement(I.a,{onPress:r,underlayColor:"white"},c.a.createElement(E.a,{style:B.container},c.a.createElement(k.a,{resizeMode:"cover",style:B.image,source:{uri:a}}),c.a.createElement(E.a,{style:B.tag},c.a.createElement(p.a,{style:B.title,numberOfLines:2},t),c.a.createElement(p.a,{style:B.subtitle,numberOfLines:1},n))))},B=b.a.create({container:{alignItems:"stretch",justifyContent:"flex-start",borderRadius:10,overflow:"hidden",borderWidth:.75,borderColor:"grey",width:210,height:420},image:{height:320},tag:{flex:1,backgroundColor:"white",alignItems:"flex-start",justifyContent:"flex-start",paddingLeft:10,paddingRight:10,paddingBottom:10,paddingTop:10},title:{fontSize:20,fontWeight:"bold",color:"black"},subtitle:{fontSize:15,color:"grey",justifyContent:"center"}}),T=n(34),v=n(279),j=function(e){var t=e.onChangeText,n=e.onSubmit,a=e.style;return c.a.createElement(E.a,{style:[S.container,a]},c.a.createElement(T.a,{placeholder:"Search...",onChangeText:function(e){return t(e)},style:S.textInput}),c.a.createElement(v.a,{name:"search",onPress:n,size:15}))},S=b.a.create({container:{flexDirection:"row",justifyContent:"space-between",borderWidth:.5,borderColor:"grey",borderRadius:20,padding:10,paddingHorizontal:20},textInput:{flex:1,outlineWidth:0}}),P=function(e){var t=e.navigation,n=Math.floor(Object(x.a)().width/250),a=c.a.useState(""),r=h()(a,2),o=r[0],i=r[1],l=Object(s.useQuery)(W,{variables:{first:50,after:null,filter:o}}),u=l.loading,d=l.data;return c.a.createElement(E.a,{style:D.container},c.a.createElement(j,{style:D.searchBar,onChangeText:i}),u?c.a.createElement(p.a,null,"Loading..."):c.a.createElement(C.a,{key:n,numColumns:n||1,data:d&&d.getBookList.edges,renderItem:function(e){var n,a=e.item;return c.a.createElement(E.a,{style:D.cardContainer},c.a.createElement(w,{title:a.title,author:a.author,imageUrl:a.coverImage,onPress:(n=a.id,void t.navigate("Book",{bookId:n}))}))},keyExtractor:function(e){return e.id}}))},D=b.a.create({container:{flex:1,backgroundColor:"white",alignItems:"center",justifyContent:"flex-start"},cardContainer:{margin:20},searchBar:{marginTop:30,marginBottom:20,width:300}}),W=Object(s.gql)(a||(a=f()(["\n  query($first: Int!, $after: String, $filter: String){\n    getBookList(first: $first, after: $after, filter: $filter){\n      edges{\n        id\n        title\n        author\n        coverImage\n      }\n      pageInfo{\n        endCursor\n        hasNextPage\n      }\n    }\n  }\n"]))),L=n(140),z=function(e){var t=e.bookID,n=e.style,a=c.a.useState(1),r=h()(a,2),o=r[0],i=r[1],l=c.a.useState(1),u=h()(l,2),d=u[0],g=u[1],m=Object(s.useQuery)(O,{variables:{id:t,page:o}}),f=m.data,y=m.loading;c.a.useEffect((function(){f&&0!=f.getBookByID.summary.totalPage&&g(f.getBookByID.summary.totalPage)}),[f]);return c.a.createElement(E.a,{style:n},c.a.createElement(E.a,{style:$.textContainer},y?c.a.createElement(p.a,null,"Loading..."):c.a.createElement(p.a,null,f.getBookByID.summary.text)),c.a.createElement(E.a,{style:$.buttonContainer},c.a.createElement(L.a,{title:"Previous",onPress:function(){i(o-1)},disabled:1==o}),c.a.createElement(p.a,null,o+"/"+d),c.a.createElement(L.a,{title:"Next",onPress:function(){i(o+1)},disabled:o>=d})))},$=b.a.create({buttonContainer:{alignItems:"center",justifyContent:"space-between",flexDirection:"row",marginTop:40},textContainer:{flex:1}}),O=Object(s.gql)(r||(r=f()(["\n    query($id: ID!, $page: Int!){\n        getBookByID(id: $id){\n            summary(page: $page){\n                text\n                totalPage\n            }\n        }\n    }\n"]))),R=function(e){var t=e.bookID,n=e.style,a=Object(s.useQuery)(H,{variables:{id:t,first:10}}),r=a.data;return a.loading?c.a.createElement(E.a,{style:n},c.a.createElement(p.a,null,"Loading...")):c.a.createElement(E.a,{style:n},c.a.createElement(p.a,{style:q.containerTitle},"Point of View"),c.a.createElement(C.a,{data:r.getBookByID.reference.edges,renderItem:function(e){var t=e.item;return c.a.createElement(V,{title:t.title,description:t.description,url:t.url})},keyExtractor:function(e){return e.id}}))},V=function(e){var t=e.title,n=e.description,a=e.url;return c.a.createElement(I.a,{underlayColor:"white",onPress:function(){window.open(a)},style:q.cardContainer},c.a.createElement(E.a,null,c.a.createElement(p.a,{style:q.title},t),c.a.createElement(p.a,{style:q.subtitle},n)))},q=b.a.create({containerTitle:{color:"grey",fontSize:25,fontWeight:"bold",marginLeft:10},title:{fontSize:20,fontWeight:"bold"},subtitle:{color:"grey"},cardContainer:{marginVertical:10,padding:10,paddingHorizontal:20,borderRadius:20,borderWidth:.5,borderColor:"grey"}}),H=Object(s.gql)(o||(o=f()(["\n    query($id: ID!, $first: Int!){\n        getBookByID(id: $id){\n            reference(first: $first){\n                edges{\n                    id\n                    title\n                    description\n                    url\n                    rating\n                }\n            }\n        }\n      }\n"]))),N=function(e){var t=e.route,n=Object(x.a)().height-200,a=Object(s.useQuery)(M,{variables:{id:t.params.bookId}}),r=a.data;return a.loading?c.a.createElement(E.a,null,c.a.createElement(p.a,null,"Loading...")):r?c.a.createElement(E.a,null,c.a.createElement(E.a,{style:A.container},c.a.createElement(E.a,{style:A.image},c.a.createElement(k.a,{style:{height:n,width:2*n/3},source:{uri:r.getBookByID.coverImage},resizeMode:"cover"})),c.a.createElement(E.a,{style:A.containerTitle},c.a.createElement(p.a,{style:A.title},r.getBookByID.title),c.a.createElement(p.a,{style:A.author},r.getBookByID.author),c.a.createElement(z,{bookID:t.params.bookId,style:{height:n-100}}),c.a.createElement(R,{bookID:t.params.bookId,style:A.reference})))):c.a.createElement(E.a,null,c.a.createElement(p.a,null,"Failed to load"))},A=b.a.create({containerTitle:{alignItems:"stretch",justifyContent:"flex-start",flexDirection:"column",flex:1},container:{alignItems:"stretch",justifyContent:"flex-start",flexDirection:"row",padding:30,backgroundColor:"white",flexWrap:"wrap"},image:{marginBottom:20,marginRight:30},title:{fontSize:50,fontWeight:"bold",color:"black"},author:{fontSize:20,color:"grey",marginBottom:10},reference:{marginTop:30}}),M=Object(s.gql)(i||(i=f()(["\n    query($id: ID!){\n        getBookByID(id: $id){\n            id\n            title\n            author\n            coverImage\n        }\n    }\n"]))),Q=(n(178),n(67)),U=function(e){var t=c.a.useState(""),n=h()(t,2),a=(n[0],n[1]),r=c.a.useState(""),o=h()(r,2),i=o[0],l=o[1],s=c.a.useState(""),u=h()(s,2),d=(u[0],u[1]),g=c.a.useState(""),m=h()(g,2),f=(m[0],m[1],e.onPress);return c.a.createElement(E.a,{style:J.container},c.a.createElement(E.a,{style:J.inputView},c.a.createElement(T.a,{style:J.TextInput,placeholder:"Username...",placeholderTextColor:"#003f5c",onChangeText:function(e){return d(e)}})),c.a.createElement(E.a,{style:J.inputView},c.a.createElement(T.a,{style:J.TextInput,placeholder:"Email...",placeholderTextColor:"#003f5c",secureTextEntry:!0,onChangeText:function(e){return a(e)}})),c.a.createElement(E.a,{style:J.inputView},c.a.createElement(T.a,{style:J.TextInput,placeholder:"Password...",placeholderTextColor:"#003f5c",secureTextEntry:!0,onChangeText:function(e){return l(e)}})),c.a.createElement(E.a,{style:J.inputView},c.a.createElement(T.a,{style:J.TextInput,placeholder:"Nama Lengkap...",placeholderTextColor:"#003f5c",secureTextEntry:!0,onChangeText:function(e){return l(i)}})),c.a.createElement(p.a,{onPress:f,style:J.account},"Already have an account?"),c.a.createElement(Q.a,{style:J.loginBtn},c.a.createElement(p.a,{style:J.loginText},"Register")))},J=b.a.create({container:{alignItems:"center",justifyContent:"center",borderWidth:.5,borderColor:"grey",padding:40,margin:20,borderRadius:5},inputView:{backgroundColor:"white",borderColor:"skyblue",borderRadius:5,borderWidth:2,height:45,marginBottom:20,alignItems:"center",justifyContent:"center"},TextInput:{height:50,flex:1,padding:25,marginLeft:20,outlineWidth:0},loginBtn:{borderRadius:5,width:"70%",height:50,alignItems:"center",justifyContent:"center",marginTop:40,backgroundColor:"skyblue"},account:{fontSize:13,color:"skyblue",fontWeight:"bold"}}),F=function(e){var t=e.onPress,n=c.a.useState(""),a=h()(n,2),r=(a[0],a[1]),o=c.a.useState(""),i=h()(o,2),l=(i[0],i[1]);return c.a.createElement(E.a,{style:G.container},c.a.createElement(E.a,{style:G.inputView},c.a.createElement(T.a,{style:G.TextInput,placeholder:"Email...",placeholderTextColor:"#003f5c",onChangeText:function(e){return r(e)}})),c.a.createElement(E.a,{style:G.inputView},c.a.createElement(T.a,{style:G.TextInput,placeholder:"Password...",placeholderTextColor:"#003f5c",secureTextEntry:!0,onChangeText:function(e){return l(e)}})),c.a.createElement(p.a,{onPress:t,style:G.account},"Don't have an account?"),c.a.createElement(Q.a,{style:G.loginBtn},c.a.createElement(p.a,{style:G.loginText},"Login")))},G=b.a.create({container:{alignItems:"center",justifyContent:"center",borderWidth:.5,borderColor:"grey",padding:40,margin:20,borderRadius:5},inputView:{backgroundColor:"white",borderColor:"skyblue",borderRadius:5,borderWidth:2,height:45,marginBottom:20,alignItems:"center",justifyContent:"center"},TextInput:{height:50,flex:1,padding:25,marginLeft:20,outlineWidth:0},loginBtn:{borderRadius:5,width:"70%",height:50,alignItems:"center",justifyContent:"center",marginTop:40,backgroundColor:"skyblue"},account:{fontSize:13,color:"skyblue",fontWeight:"bold"}}),K=function(){var e=c.a.useState(!0),t=h()(e,2),n=t[0],a=t[1],r=function(){a(!n)};return c.a.createElement(E.a,{style:X.container},n?c.a.createElement(F,{onPress:r}):c.a.createElement(U,{onPress:r}))},X=b.a.create({container:{justifyContent:"center",alignItems:"center"}}),Y=n(32),Z=function(){var e=Object(Y.useNavigation)();return c.a.createElement(E.a,{style:_.header},c.a.createElement(E.a,null,c.a.createElement(p.a,{style:_.title,onPress:function(){e.navigate("Home")}},"BiblioGig"),c.a.createElement(p.a,{style:_.subtitle},"by Coder x ISH TIBEN")),c.a.createElement(p.a,{style:_.login,onPress:function(){e.navigate("Auth")}},"Login"))},_=b.a.create({header:{height:100,backgroundColor:"blue",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},title:{fontSize:25,fontWeight:"bold",color:"white",justifyContent:"center",paddingTop:20,paddingBottom:10,paddingLeft:60},subtitle:{fontSize:10,color:"white",justifyContent:"center",paddingBottom:10,paddingLeft:60},login:{fontSize:20,color:"white",paddingBottom:10,paddingRight:60}}),ee=Object(g.a)(),te=function(){return c.a.createElement(ee.Navigator,{screenOptions:{header:function(){return c.a.createElement(Z,null)}}},c.a.createElement(ee.Screen,{name:"Home",component:P}),c.a.createElement(ee.Screen,{name:"Book",component:N}),c.a.createElement(ee.Screen,{name:"Auth",component:K}))},ne={prefixes:["https://aeramu.github.io/rebook-client","http://localhost:1900"],config:{Home:"",Book:"book/:bookId"}},ae=function(){return c.a.createElement(d.a,{linking:ne},c.a.createElement(te,null))};function re(){return c.a.createElement(s.ApolloProvider,{client:u},c.a.createElement(ae,null))}},222:function(e,t,n){e.exports=n(272)}},[[222,1,2]]]);
//# sourceMappingURL=app.4d806347.chunk.js.map